var lonad=function(r){"use strict";function e(r){return"object"==typeof r&&null!==r}function t(r){return function(r){return null!==r}(r)&&function(r){return void 0!==r}(r)}function n(r){return Boolean(r&&r.then)}function l(r){return h.Some(r.filter(u).map((r=>r.get())))}function o(r){return Boolean(r&&r.isOptionalInstance)}function u(r){return o(r)&&r.valuePresent}function s(r){return o(r)&&r.valueAbsent}function a(r,e,t,n){return new(t||(t=Promise))((function(l,o){function u(r){try{a(n.next(r))}catch(r){o(r)}}function s(r){try{a(n.throw(r))}catch(r){o(r)}}function a(r){var e;r.done?l(r.value):(e=r.value,e instanceof t?e:new t((function(r){r(e)}))).then(u,s)}a((n=n.apply(r,e||[])).next())}))}function i(r){return a(this,void 0,void 0,(function*(){try{yield r}catch(r){}}))}var c={nullary:function(){return this},unary:function(r){return i(r),this},binary:function(r,e){return i(r),i(e),this},any:function(...r){return r.forEach(i),this}};class h{constructor(){this.isOptionalInstance=!0,this.valuePresent=!1,this.valueAbsent=!1}nullableMap(...r){return c.any.call(this,...r)}or(...r){return c.any.call(this,...r)}match(...r){return c.any.call(this,...r)}transform(...r){return c.any.call(this,...r)}map(...r){return c.any.call(this,...r)}optionalProperty(...r){return c.any.call(this,...r)}nullableProperty(...r){return c.any.call(this,...r)}property(...r){return c.any.call(this,...r)}flatMap(...r){return c.any.call(this,...r)}tap(...r){return c.any.call(this,...r)}satisfies(...r){return c.any.call(this,...r)}valueEquals(...r){return c.any.call(this,...r)}filter(...r){return c.any.call(this,...r)}reject(...r){return c.any.call(this,...r)}get(...r){return c.any.call(this,...r)}getOrElse(...r){return c.any.call(this,...r)}recover(...r){return c.any.call(this,...r)}replace(...r){return c.any.call(this,...r)}}h.fromNullable=function(r){return t(r)?h.Some(r):h.None()},h.fromParsedJson=function(r){if(!o(r))throw new Error("fromParsedJson(object) expects an object obtained from JSON.parsing an Optional stringified with JSON.stringify");return u(r)?h.Some(r.value):h.None()},h.all=function(r){return r.some(s)?h.None():l(r)},h.values=l,h.when=function(r,e){return r?h.Some(e):h.None()},h.first=function(r){const e=r.findIndex(u);return-1===e?h.None():r[e]},h.isOptional=o,h.isSome=u,h.isNone=s,h.nullableMap=(...r)=>{if(r.length<2)return(...e)=>h.nullableMap(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).nullableMap(...r)},h.or=(...r)=>{if(r.length<2)return(...e)=>h.or(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).or(...r)},h.match=(...r)=>{if(r.length<2)return(...e)=>h.match(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).match(...r)},h.transform=(...r)=>{if(r.length<2)return(...e)=>h.transform(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).transform(...r)},h.map=(...r)=>{if(r.length<2)return(...e)=>h.map(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).map(...r)},h.optionalProperty=(...r)=>{if(r.length<2)return(...e)=>h.optionalProperty(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).optionalProperty(...r)},h.nullableProperty=(...r)=>{if(r.length<2)return(...e)=>h.nullableProperty(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).nullableProperty(...r)},h.property=(...r)=>{if(r.length<2)return(...e)=>h.property(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).property(...r)},h.flatMap=(...r)=>{if(r.length<2)return(...e)=>h.flatMap(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).flatMap(...r)},h.tap=(...r)=>{if(r.length<2)return(...e)=>h.tap(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).tap(...r)},h.satisfies=(...r)=>{if(r.length<2)return(...e)=>h.satisfies(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).satisfies(...r)},h.valueEquals=(...r)=>{if(r.length<2)return(...e)=>h.valueEquals(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).valueEquals(...r)},h.filter=(...r)=>{if(r.length<2)return(...e)=>h.filter(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).filter(...r)},h.reject=(...r)=>{if(r.length<2)return(...e)=>h.reject(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).reject(...r)},h.get=(...r)=>{if(r.length<2)return(...e)=>h.get(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).get(...r)},h.getOrElse=(...r)=>{if(r.length<2)return(...e)=>h.getOrElse(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).getOrElse(...r)},h.recover=(...r)=>{if(r.length<2)return(...e)=>h.recover(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).recover(...r)},h.replace=(...r)=>{if(r.length<2)return(...e)=>h.replace(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:h.Some()).replace(...r)};var p=r=>{throw r};class f extends h{constructor(){super(),this.valueAbsent=!0,this.valuePresent=!1}or(r){return"function"==typeof r?r():r}match(r){return(r.None||p)(void 0)}satisfies(r){return!1}valueEquals(){return!1}get(r){throw new Error(r||"Cannot unwrap None instances")}getOrElse(r){return r}recover(r){return h.Some(r())}}var m="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},y=9007199254740991,v="[object Arguments]",g="[object Function]",d="[object GeneratorFunction]",O="object"==typeof m&&m&&m.Object===Object&&m,E="object"==typeof self&&self&&self.Object===Object&&self,b=O||E||Function("return this")();function P(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}function M(r,e){for(var t=-1,n=e.length,l=r.length;++t<n;)r[l+t]=e[t];return r}var k=Object.prototype,S=k.hasOwnProperty,W=k.toString,j=b.Symbol,x=k.propertyIsEnumerable,N=j?j.isConcatSpreadable:void 0,R=Math.max;function A(r,e,t,n,l){var o=-1,u=r.length;for(t||(t=w),l||(l=[]);++o<u;){var s=r[o];e>0&&t(s)?e>1?A(s,e-1,t,n,l):M(l,s):n||(l[l.length]=s)}return l}function w(r){return q(r)||function(r){return function(r){return function(r){return!!r&&"object"==typeof r}(r)&&function(r){return null!=r&&function(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=y}(r.length)&&!function(r){var e=function(r){var e=typeof r;return!!r&&("object"==e||"function"==e)}(r)?W.call(r):"";return e==g||e==d}(r)}(r)}(r)&&S.call(r,"callee")&&(!x.call(r,"callee")||W.call(r)==v)}(r)||!!(N&&r&&r[N])}var q=Array.isArray;var F,I,B,J=(I=function(r){var e=(r=A(r,1)).length,t=e;for(F&&r.reverse();t--;)if("function"!=typeof r[t])throw new TypeError("Expected a function");return function(){for(var t=0,n=e?r[t].apply(this,arguments):arguments[0];++t<e;)n=r[t].call(this,n);return n}},B=R(void 0===B?I.length-1:B,0),function(){for(var r=arguments,e=-1,t=R(r.length-B,0),n=Array(t);++e<t;)n[e]=r[B+e];e=-1;for(var l=Array(B+1);++e<B;)l[e]=r[e];return l[B]=n,P(I,this,l)}),C=J,T=Error;const G=r=>r,$=r=>()=>r,z=r=>e=>e[r];class D extends h{constructor(r){super(),this.valuePresent=!0,this.valueAbsent=!1,this.value=r}nullableMap(r){return h.fromNullable(r(this.value))}match(r){return(r.Some||G)(this.value)}transform(r){return this.map(r)}map(r){return h.Some(r(this.value))}optionalProperty(r){return e(this.value)?this.value[r]:void 0}nullableProperty(r){return h.fromNullable(e(this.value)?this.value[r]:void 0)}flatMap(r){return r(this.value)}tap(r){return r(this.value),this}property(r){return h.Some(e(this.value)?this.value[r]:void 0)}satisfies(r){return Boolean(r(this.value))}valueEquals(r){return this.value===r}filter(r){return r(this.value)?this:h.None()}reject(r){return r(this.value)?h.None():this}get(){return this.value}getOrElse(r){return this.value}replace(r){return h.Some(r)}}function H(r,e){const t=r.prototype;return r.prototype=Object.create(e.prototype),Object.assign(r.prototype,t)}function K(r,e,...t){const n=new r(...t);return Object.setPrototypeOf(n,e.prototype),n}const L=function(r){return K(D,L,r)},Q=function(){return K(f,Q)};function U(r,e=G,t){try{const l=r(t);return n(l)?_.Pending(l.then(e,_.Aborted)):e(l)}catch(r){return _.Aborted(r)}}function V(r){return U(r,(r=>{if(Y(r))return r;let e=r;return r&&o(r)||(e=h.fromNullable(r)),e.match({Some:_.Ok,None:$(_.Error())})}))}function X(r){if(!t(r))return _.Error();if(!e(r))return _.Ok(r);if(n(r))return _.Pending(r.then(X,_.Aborted));if(Y(r))return r;return(o(r)?r:h.fromNullable(r)).match({Some:r=>_.Ok(r),None:_.Error})}function Y(r){return Boolean(r&&r.isResultInstance)}function Z(r){return Y(r)&&!0===r.isAsynchronous}H(L,D),H(Q,f),h.Some=L,h.None=Q;class _{constructor(){this.isResultInstance=!0,this.isAsynchronous=!1,this.isOk=!1,this.isError=!1,this.isAborted=!1}}_.fromPromise=function(r){return _.Pending(n(r)?r.then(_.Ok,_.Error):_.Error())},_.when=function(r,e,t){return r?_.Ok(e):_.Error(t)},_.expect=X,_.try=V,_.tryAsync=function(r){return C(V,_.asynchronous)(r)},_.isResult=Y,_.isSyncResult=function(r){return Y(r)&&!1===r.isAsynchronous},_.isAsyncResult=Z,_.get=(...r)=>{if(r.length<1)return(...e)=>_.get(...r,...e);const e=r.splice(0,1)[0];return(null!=e?e:_.Ok()).get(...r)},_.getOrElse=(...r)=>{if(r.length<2)return(...e)=>_.getOrElse(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).getOrElse(...r)},_.recover=(...r)=>{if(r.length<2)return(...e)=>_.recover(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).recover(...r)},_.replace=(...r)=>{if(r.length<2)return(...e)=>_.replace(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).replace(...r)},_.expectProperty=(...r)=>{if(r.length<2)return(...e)=>_.expectProperty(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).expectProperty(...r)},_.property=(...r)=>{if(r.length<2)return(...e)=>_.property(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).property(...r)},_.tap=(...r)=>{if(r.length<2)return(...e)=>_.tap(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).tap(...r)},_.satisfies=(...r)=>{if(r.length<2)return(...e)=>_.satisfies(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).satisfies(...r)},_.valueEquals=(...r)=>{if(r.length<2)return(...e)=>_.valueEquals(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).valueEquals(...r)},_.map=(...r)=>{if(r.length<2)return(...e)=>_.map(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).map(...r)},_.transform=(...r)=>{if(r.length<2)return(...e)=>_.transform(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).transform(...r)},_.expectMap=(...r)=>{if(r.length<2)return(...e)=>_.expectMap(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).expectMap(...r)},_.flatMap=(...r)=>{if(r.length<2)return(...e)=>_.flatMap(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).flatMap(...r)},_.merge=(...r)=>{if(r.length<1)return(...e)=>_.merge(...r,...e);const e=r.splice(0,1)[0];return(null!=e?e:_.Ok()).merge(...r)},_.reject=(...r)=>{if(r.length<2)return(...e)=>_.reject(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).reject(...r)},_.filter=(...r)=>{if(r.length<2)return(...e)=>_.filter(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).filter(...r)},_.match=(...r)=>{if(r.length<2)return(...e)=>_.match(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).match(...r)},_.abortOnErrorWith=(...r)=>{if(r.length<2)return(...e)=>_.abortOnErrorWith(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).abortOnErrorWith(...r)},_.tapError=(...r)=>{if(r.length<2)return(...e)=>_.tapError(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).tapError(...r)},_.mapError=(...r)=>{if(r.length<2)return(...e)=>_.mapError(...r,...e);const e=r.splice(1,1)[0];return(null!=e?e:_.Ok()).mapError(...r)},_.recoverWhen=(...r)=>{if(r.length<3)return(...e)=>_.recoverWhen(...r,...e);const e=r.splice(2,1)[0];return(null!=e?e:_.Ok()).recoverWhen(...r)},_.abortOnError=(...r)=>{if(r.length<1)return(...e)=>_.abortOnError(...r,...e);const e=r.splice(0,1)[0];return(null!=e?e:_.Ok()).abortOnError(...r)},_.asynchronous=(...r)=>{if(r.length<1)return(...e)=>_.asynchronous(...r,...e);const e=r.splice(0,1)[0];return(null!=e?e:_.Ok()).asynchronous(...r)},_.toPromise=(...r)=>{if(r.length<1)return(...e)=>_.toPromise(...r,...e);const e=r.splice(0,1)[0];return(null!=e?e:_.Ok()).toPromise(...r)},_.toOptional=(...r)=>{if(r.length<1)return(...e)=>_.toOptional(...r,...e);const e=r.splice(0,1)[0];return(null!=e?e:_.Ok()).toOptional(...r)};class rr extends _{get(...r){return c.any.call(this,...r)}getOrElse(...r){return c.any.call(this,...r)}recover(...r){return c.any.call(this,...r)}replace(...r){return c.any.call(this,...r)}expectProperty(...r){return c.any.call(this,...r)}property(...r){return c.any.call(this,...r)}tap(...r){return c.any.call(this,...r)}satisfies(...r){return c.any.call(this,...r)}valueEquals(...r){return c.any.call(this,...r)}map(...r){return c.any.call(this,...r)}transform(...r){return c.any.call(this,...r)}expectMap(...r){return c.any.call(this,...r)}flatMap(...r){return c.any.call(this,...r)}merge(...r){return c.any.call(this,...r)}reject(...r){return c.any.call(this,...r)}filter(...r){return c.any.call(this,...r)}match(...r){return c.any.call(this,...r)}abortOnErrorWith(...r){return c.any.call(this,...r)}tapError(...r){return c.any.call(this,...r)}mapError(...r){return c.any.call(this,...r)}recoverWhen(...r){return c.any.call(this,...r)}abortOnError(...r){return c.any.call(this,...r)}asynchronous(...r){return c.any.call(this,...r)}toPromise(...r){return c.any.call(this,...r)}toOptional(...r){return c.any.call(this,...r)}}class er extends rr{constructor(r){super(),this.isError=!0,this.isAborted=!0,this.error=r}tapError(r){return U((()=>r(this.error)),$(this))}get(){throw this.error}getOrElse(r){return r}satisfies(){return!1}valueEquals(){return!1}merge(){return this.error}match(r){return(r.Aborted||p)(this.error)}asynchronous(){return _.Pending(Promise.resolve(this))}toPromise(){return Promise.reject(this.error)}toOptional(){return h.None()}}class tr extends rr{constructor(r){super(),this.isError=!0,this.error=r}get(){throw this.error}getOrElse(r){return r}recover(r){return U((()=>r(this.error)),_.Ok)}recoverWhen(r,e){return _.Ok(this.error).filter(r).mapError($(this.error)).map(e)}satisfies(){return!1}valueEquals(){return!1}merge(){return this.error}match(r){return(r.Error||p)(this.error)}tapError(r){return U((()=>r(this.error)),$(this))}mapError(r){return U((()=>r(this.error)),_.Error)}abortOnError(){return _.Aborted(this.error)}abortOnErrorWith(r){return U((()=>"function"==typeof r?r(this.error):r),_.Aborted)}asynchronous(){return _.Pending(Promise.resolve(this))}toPromise(){return Promise.reject(this.error)}toOptional(){return h.None()}}class nr extends rr{constructor(r){super(),this.isOk=!0,this.value=r}get(){return this.value}getOrElse(){return this.value}replace(r){return U($(r),_.Ok)}expectProperty(r){return X(this.value[r])}property(r){return _.Ok(this.value[r])}tap(r){return U((()=>r(this.value)),$(this))}satisfies(r){return U((()=>r(this.value)),Boolean)}valueEquals(r){return this.value===r}map(r){return U((()=>r(this.value)),_.Ok)}transform(r){return this.map(r)}expectMap(r){return X(r(this.value))}flatMap(r){return U((()=>r(this.value)),X)}merge(){return this.value}reject(r){return U((()=>r(this.value)),(r=>r?_.Error():_.Ok(this.value)))}filter(r){return U((()=>r(this.value)),(r=>r?_.Ok(this.value):_.Error()))}match(r){return(r.Ok||G)(this.value)}asynchronous(){return _.Pending(Promise.resolve(this))}toPromise(){return Promise.resolve(this.value)}toOptional(){return h.Some(this.value)}}class lr extends _{}class or extends lr{constructor(r){super(),this.isAsynchronous=!0,this.promise=or.FindNextNonPending(r),this.makePropertyNonEnumerable("isOk"),this.makePropertyNonEnumerable("isError"),this.makePropertyNonEnumerable("isAborted")}get(){return this.toPromise()}getOrElse(r){return C(this.callWrappedResultMethod("getOrElse"),z("promise"))(r)}recover(r){return this.callWrappedResultMethod("recover")(r)}replace(r){return this.callWrappedResultMethod("replace")(r)}expectProperty(r){return this.callWrappedResultMethod("expectProperty")(r)}property(r){return this.callWrappedResultMethod("property")(r)}tap(r){return this.callWrappedResultMethod("tap")(r)}satisfies(r){return C(this.callWrappedResultMethod("satisfies"),z("promise"))(r)}valueEquals(r){return C(this.callWrappedResultMethod("valueEquals"),z("promise"))(r)}map(r){return this.callWrappedResultMethod("map")(r)}transform(r){return this.map(r)}expectMap(r){return this.callWrappedResultMethod("expectMap")(r)}flatMap(r){return this.callWrappedResultMethod("flatMap")(r)}merge(){return C(this.callWrappedResultMethod("merge"),z("promise"))()}reject(r){return this.callWrappedResultMethod("reject")(r)}filter(r){return this.callWrappedResultMethod("filter")(r)}match(r){return C(this.callWrappedResultMethod("match"),z("promise"))(r)}abortOnErrorWith(r){return this.callWrappedResultMethod("abortOnErrorWith")(r)}tapError(r){return this.callWrappedResultMethod("tapError")(r)}mapError(r){return this.callWrappedResultMethod("mapError")(r)}recoverWhen(r,e){return this.callWrappedResultMethod("recoverWhen")(r,e)}abortOnError(){return this.callWrappedResultMethod("abortOnError")()}asynchronous(){return c.nullary.call(this)}toPromise(){return this.promise.then(_.toPromise)}toOptional(){return C(this.callWrappedResultMethod("toOptional"),z("promise"))()}callWrappedResultMethod(r){return(...e)=>_.Pending(this.promise.then(_[r](...e)).catch(_.Aborted))}makePropertyNonEnumerable(r){Object.defineProperty(this,r,{enumerable:!1,get:()=>{throw new T(`Cannot access '${r}' of Result.Pending`)}})}static FindNextNonPending(r){return a(this,void 0,void 0,(function*(){const e=yield r;return Z(e)&&e instanceof or?or.FindNextNonPending(e.promise):e}))}}const ur=function(r){return K(er,ur,r)},sr=function(r){return K(tr,sr,r)},ar=function(r){return K(nr,ar,r)},ir=function(r){return K(or,ir,r)};return H(ar,nr),H(sr,tr),H(ur,er),H(ir,or),_.Ok=ar,_.Error=sr,_.Aborted=ur,_.Pending=ir,r.AsyncResult=lr,r.Optional=h,r.Result=_,r.SyncResult=rr,r}({});
